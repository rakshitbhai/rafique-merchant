"use strict";(self.webpackChunkrafiq_merchant=self.webpackChunkrafiq_merchant||[]).push([[607],{1110:(e,t,r)=>{r.r(t),r.d(t,{default:()=>E});var n=r(5043),a=r(111),s=r(3546),i=r(7189),o=r(1051),c=r(4930);function l(e){const t=(0,c.M)(()=>(0,i.OQ)(e)),{isStatic:r}=(0,n.useContext)(o.Q);if(r){const[,r]=(0,n.useState)(e);(0,n.useEffect)(()=>t.on("change",r),[])}return t}var d=r(6744);var u=r(8412),p=r(293);function f(e,t){const r=l(t()),n=()=>r.set(t());return n(),(0,p.E)(()=>{const t=()=>u.Gt.preRender(n,!1,!0),r=e.map(e=>e.on("change",t));return()=>{r.forEach(e=>e()),(0,u.WG)(n)}}),r}function m(e,t,r,n){if("function"===typeof e)return function(e){i.bt.current=[],e();const t=f(i.bt.current,e);return i.bt.current=void 0,t}(e);const a="function"===typeof t?t:function(){const e=!Array.isArray(arguments.length<=0?void 0:arguments[0]),t=e?0:-1,r=0+t<0||arguments.length<=0+t?void 0:arguments[0+t],n=1+t<0||arguments.length<=1+t?void 0:arguments[1+t],a=2+t<0||arguments.length<=2+t?void 0:arguments[2+t],s=3+t<0||arguments.length<=3+t?void 0:arguments[3+t],i=(0,d.G)(n,a,s);return e?i(r):i}(t,r,n);return Array.isArray(e)?g(e,a):g([e],e=>{let[t]=e;return a(t)})}function g(e,t){const r=(0,c.M)(()=>[]);return f(e,()=>{r.length=0;const n=e.length;for(let t=0;t<n;t++)r[t]=e[t].get();return t(r)})}var h=r(3440),w=r(3928),y=r(1345),x=r(579);const v=.38,b=e=>{let{item:t,offset:r,onSelect:a,isTop:s,triggerFling:i,prefersReduced:o,viewportW:c}=e;const d=l(0),u=m(d,[-320,320],o?[0,0]:[-15,15]),p=o?1:1-.05*r,f=o?10*r:14*r,g=0===r?"0 18px 40px -18px rgba(0,0,0,.65),0 4px 14px -6px rgba(0,0,0,.5)":"0 8px 20px -12px rgba(0,0,0,.5)",w=(0,n.useRef)(!1),v=(0,n.useMemo)(()=>y.oF.getImageUrls(t.image,{widths:[720,900],quality:60,formats:["webp","jpg"]}),[t.image]),b=(0,n.useCallback)((e,t)=>{if(!s)return;const r=t.offset.x,n=t.velocity.x,a=r>0?1:-1;Math.abs(r)>110||Math.abs(n)>620?(w.current=!1,i(a)):d.stop()},[s,i,d]);return(0,x.jsx)(h.P.div,{role:s?"option":"presentation","aria-selected":s,className:"swipe-card glass-strong".concat(s?" top":""),style:{backgroundImage:"url(".concat(v.base,")"),zIndex:50-r,x:d,rotate:u,scale:p,y:f,boxShadow:g,cursor:s?"grab":"default",willChange:s?"transform":"auto"},drag:!!s&&"x",dragConstraints:{left:0,right:0},dragElastic:.25,onDragEnd:b,whileDrag:o?void 0:{scale:1.035*p,y:f-4},initial:{opacity:0,scale:.94*p,y:f+20},animate:{opacity:1,scale:p,y:f,transition:{duration:.4,ease:[.16,1,.3,1]}},exit:{opacity:0,y:f-40,scale:.9*p,transition:{duration:.25}},onDoubleClick:()=>a&&a(t),children:(0,x.jsx)(j,{item:t,onSelect:a})})},k=e=>{let{data:t,viewportW:r,prefersReduced:a}=e;const{item:s,dir:i}=t,o=r.current+160,c=(0,n.useMemo)(()=>y.oF.getImageUrls(s.image,{widths:[720,900],quality:60,formats:["webp","jpg"]}),[s.image]);return(0,x.jsx)(h.P.div,{className:"swipe-card glass-strong leaving",style:{backgroundImage:"url(".concat(c.base,")"),zIndex:100,position:"absolute",inset:0,cursor:"default",willChange:"transform, opacity"},initial:{x:0,y:0,rotate:0,scale:1},animate:{x:i*o,y:-120,rotate:a?0:26*i,scale:1.05,opacity:.9,transition:{duration:v,ease:[.16,1,.3,1]}},exit:{opacity:0,transition:{duration:.15}},children:(0,x.jsx)(j,{item:s})})},j=e=>{let{item:t,onSelect:r}=e;return(0,x.jsxs)("div",{className:"swipe-card-overlay",children:[(0,x.jsxs)("div",{className:"swipe-meta",children:[(0,x.jsx)("span",{className:"badge",style:{marginBottom:".6rem"},children:t.type}),(0,x.jsx)("h3",{children:t.title}),(0,x.jsx)("p",{className:"loc",children:t.location}),(0,x.jsx)("p",{className:"price-line",children:(0,w.$)(t.price)}),(0,x.jsxs)("div",{className:"mini-meta",children:[t.beds," BD \u2022 ",t.baths," BA \u2022 ",t.size.toLocaleString()," SF"]})]}),r&&(0,x.jsx)("div",{className:"swipe-actions",children:(0,x.jsx)("button",{className:"cta small",onClick:()=>r(t),children:"Details"})})]})},E=e=>{let{items:t,onSelect:r}=e;const[i,o]=(0,n.useState)(0),[c,l]=(0,n.useState)(null),d=t.length,u=(0,a.I)(),p=(0,n.useRef)("undefined"!==typeof window?window.innerWidth:1024);(0,n.useEffect)(()=>{const e=()=>{p.current=window.innerWidth};return window.addEventListener("resize",e,{passive:!0}),()=>window.removeEventListener("resize",e)},[]),(0,n.useEffect)(()=>{if(!d)return;y.Hp.markStart("swipe-preload");const e=(i+3)%d,r=y.oF.getImageUrls(t[e].image,{widths:[720,900],quality:60,formats:["webp","jpg"]}).base;y.oF.preloadImage(r,"low").then(()=>y.Hp.markEnd("swipe-preload")).catch(()=>y.Hp.markEnd("swipe-preload"))},[i,t,d]);const f=(0,n.useCallback)(e=>{d&&o(e=>(e+1)%d)},[d]),m=(0,n.useMemo)(()=>{if(!d)return[];const e=[];for(let r=0;r<Math.min(3,d);r++){const n=(i+r)%d;e.push({item:t[n],offset:r,stackKey:"".concat(t[n].id,"-").concat(Math.floor((i+r)/d))})}return e},[i,t,d]),g=(0,n.useCallback)(e=>{if(!d)return;const r=t[i],n="".concat(r.id,"-leave-").concat(Date.now());l({item:r,dir:e,key:n}),setTimeout(()=>{f(e)},190),setTimeout(()=>{l(e=>e&&e.key===n?null:e)},460)},[d,t,i,f]);return(0,n.useEffect)(()=>{const e=e=>{d&&("ArrowLeft"===e.key||"ArrowRight"===e.key?(e.preventDefault(),g("ArrowRight"===e.key?1:-1)):"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),r&&r(t[i])))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[i,t,d,r,g]),(0,x.jsxs)("div",{className:"swipe-deck","aria-label":"Property swipe deck",role:"list",style:{position:"relative"},children:[(0,x.jsx)(s.N,{children:c&&(0,x.jsx)(k,{data:c,viewportW:p,prefersReduced:u},c.key)}),m.map(e=>{let{item:t,offset:n,stackKey:a}=e;return(0,x.jsx)(b,{item:t,offset:n,onSelect:r,isTop:0===n&&!c,triggerFling:g,prefersReduced:u,viewportW:p},a)})]})}}}]);
//# sourceMappingURL=swipe-deck.59018ae5.chunk.js.map
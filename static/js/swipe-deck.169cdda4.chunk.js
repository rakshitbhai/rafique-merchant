"use strict";(self.webpackChunkrafiq_merchant=self.webpackChunkrafiq_merchant||[]).push([[607],{1110:(e,t,r)=>{r.r(t),r.d(t,{default:()=>j});var n=r(5043),i=r(111),s=r(3546),a=r(7189),o=r(1051),c=r(4930);function l(e){const t=(0,c.M)(()=>(0,a.OQ)(e)),{isStatic:r}=(0,n.useContext)(o.Q);if(r){const[,r]=(0,n.useState)(e);(0,n.useEffect)(()=>t.on("change",r),[])}return t}var d=r(6744);var u=r(8412),f=r(293);function p(e,t){const r=l(t()),n=()=>r.set(t());return n(),(0,f.E)(()=>{const t=()=>u.Gt.preRender(n,!1,!0),r=e.map(e=>e.on("change",t));return()=>{r.forEach(e=>e()),(0,u.WG)(n)}}),r}function m(e,t,r,n){if("function"===typeof e)return function(e){a.bt.current=[],e();const t=p(a.bt.current,e);return a.bt.current=void 0,t}(e);const i="function"===typeof t?t:function(){const e=!Array.isArray(arguments.length<=0?void 0:arguments[0]),t=e?0:-1,r=0+t<0||arguments.length<=0+t?void 0:arguments[0+t],n=1+t<0||arguments.length<=1+t?void 0:arguments[1+t],i=2+t<0||arguments.length<=2+t?void 0:arguments[2+t],s=3+t<0||arguments.length<=3+t?void 0:arguments[3+t],a=(0,d.G)(n,i,s);return e?a(r):a}(t,r,n);return Array.isArray(e)?g(e,i):g([e],e=>{let[t]=e;return i(t)})}function g(e,t){const r=(0,c.M)(()=>[]);return p(e,()=>{r.length=0;const n=e.length;for(let t=0;t<n;t++)r[t]=e[t].get();return t(r)})}var h=r(3440),w=r(3928),y=r(579);const x=.38,v=e=>{let{item:t,offset:r,onSelect:i,isTop:s,triggerFling:a,prefersReduced:o,viewportW:c}=e;const d=l(0),u=m(d,[-320,320],o?[0,0]:[-15,15]),f=o?1:1-.05*r,p=o?10*r:14*r,g=0===r?"0 18px 40px -18px rgba(0,0,0,.65),0 4px 14px -6px rgba(0,0,0,.5)":"0 8px 20px -12px rgba(0,0,0,.5)",w=(0,n.useRef)(!1);return(0,y.jsx)(h.P.div,{role:s?"option":"presentation","aria-selected":s,className:"swipe-card glass-strong".concat(s?" top":""),style:{backgroundImage:"url(".concat(t.image,"?w=900&auto=format&fit=crop&q=60)"),zIndex:50-r,x:d,rotate:u,scale:f,y:p,boxShadow:g,cursor:s?"grab":"default"},drag:!!s&&"x",dragConstraints:{left:0,right:0},dragElastic:.25,onDragEnd:(e,t)=>{if(!s)return;const r=t.offset.x,n=t.velocity.x,i=r>0?1:-1;Math.abs(r)>110||Math.abs(n)>620?(w.current=!1,a(i)):d.stop()},whileDrag:o?void 0:{scale:1.035*f,y:p-4},initial:{opacity:0,scale:.94*f,y:p+20},animate:{opacity:1,scale:f,y:p,transition:{duration:.4,ease:[.16,1,.3,1]}},exit:{opacity:0,y:p-40,scale:.9*f,transition:{duration:.25}},onDoubleClick:()=>i&&i(t),children:(0,y.jsx)(k,{item:t,onSelect:i})})},b=e=>{let{data:t,viewportW:r,prefersReduced:n}=e;const{item:i,dir:s}=t,a=r.current+160;return(0,y.jsx)(h.P.div,{className:"swipe-card glass-strong leaving",style:{backgroundImage:"url(".concat(i.image,"?w=900&auto=format&fit=crop&q=60)"),zIndex:100,position:"absolute",inset:0,cursor:"default"},initial:{x:0,y:0,rotate:0,scale:1},animate:{x:s*a,y:-120,rotate:n?0:26*s,scale:1.05,opacity:.9,transition:{duration:x,ease:[.16,1,.3,1]}},exit:{opacity:0,transition:{duration:.15}},children:(0,y.jsx)(k,{item:i})})},k=e=>{let{item:t,onSelect:r}=e;return(0,y.jsxs)("div",{className:"swipe-card-overlay",children:[(0,y.jsxs)("div",{className:"swipe-meta",children:[(0,y.jsx)("span",{className:"badge",style:{marginBottom:".6rem"},children:t.type}),(0,y.jsx)("h3",{children:t.title}),(0,y.jsx)("p",{className:"loc",children:t.location}),(0,y.jsx)("p",{className:"price-line",children:(0,w.$)(t.price)}),(0,y.jsxs)("div",{className:"mini-meta",children:[t.beds," BD \u2022 ",t.baths," BA \u2022 ",t.size.toLocaleString()," SF"]})]}),r&&(0,y.jsx)("div",{className:"swipe-actions",children:(0,y.jsx)("button",{className:"cta small",onClick:()=>r(t),children:"Details"})})]})},j=e=>{let{items:t,onSelect:r}=e;const[a,o]=(0,n.useState)(0),[c,l]=(0,n.useState)(null),d=t.length,u=(0,i.I)(),f=(0,n.useRef)("undefined"!==typeof window?window.innerWidth:1024);(0,n.useEffect)(()=>{const e=()=>{f.current=window.innerWidth};return window.addEventListener("resize",e,{passive:!0}),()=>window.removeEventListener("resize",e)},[]),(0,n.useEffect)(()=>{if(!d)return;const e="".concat(t[(a+3)%d].image,"?w=720&auto=format&fit=crop&q=60&fm=webp");(new Image).src=e},[a,t,d]);const p=(0,n.useCallback)(e=>{d&&o(e=>(e+1)%d)},[d]),m=(0,n.useMemo)(()=>{if(!d)return[];const e=[];for(let r=0;r<Math.min(3,d);r++){const n=(a+r)%d;e.push({item:t[n],offset:r,stackKey:"".concat(t[n].id,"-").concat(Math.floor((a+r)/d))})}return e},[a,t,d]),g=(0,n.useCallback)(e=>{if(!d)return;const r=t[a],n="".concat(r.id,"-leave-").concat(Date.now());l({item:r,dir:e,key:n}),setTimeout(()=>{p(e)},190),setTimeout(()=>{l(e=>e&&e.key===n?null:e)},460)},[d,t,a,p]);return(0,n.useEffect)(()=>{const e=e=>{d&&("ArrowLeft"===e.key||"ArrowRight"===e.key?(e.preventDefault(),g("ArrowRight"===e.key?1:-1)):"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),r&&r(t[a])))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a,t,d,r,g]),(0,y.jsxs)("div",{className:"swipe-deck","aria-label":"Property swipe deck",role:"list",style:{position:"relative"},children:[(0,y.jsx)(s.N,{children:c&&(0,y.jsx)(b,{data:c,viewportW:f,prefersReduced:u},c.key)}),m.map(e=>{let{item:t,offset:n,stackKey:i}=e;return(0,y.jsx)(v,{item:t,offset:n,onSelect:r,isTop:0===n&&!c,triggerFling:g,prefersReduced:u,viewportW:f},i)})]})}}}]);
//# sourceMappingURL=swipe-deck.169cdda4.chunk.js.map
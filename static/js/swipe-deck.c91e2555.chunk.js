"use strict";(self.webpackChunkrafiq_merchant=self.webpackChunkrafiq_merchant||[]).push([[607],{1110:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var r=n(8),c=n(5043),a=n(7189),s=n(1051),i=n(4930);function o(e){const t=(0,i.M)(()=>(0,a.OQ)(e)),{isStatic:n}=(0,c.useContext)(s.Q);if(n){const[,n]=(0,c.useState)(e);(0,c.useEffect)(()=>t.on("change",n),[])}return t}var l=n(111),u=n(6744);var d=n(8412),f=n(293);function h(e,t){const n=o(t()),r=()=>n.set(t());return r(),(0,f.E)(()=>{const t=()=>d.Gt.preRender(r,!1,!0),n=e.map(e=>e.on("change",t));return()=>{n.forEach(e=>e()),(0,d.WG)(r)}}),n}function p(e,t,n,r){if("function"===typeof e)return function(e){a.bt.current=[],e();const t=h(a.bt.current,e);return a.bt.current=void 0,t}(e);const c="function"===typeof t?t:function(){const e=!Array.isArray(arguments.length<=0?void 0:arguments[0]),t=e?0:-1,n=0+t<0||arguments.length<=0+t?void 0:arguments[0+t],r=1+t<0||arguments.length<=1+t?void 0:arguments[1+t],c=2+t<0||arguments.length<=2+t?void 0:arguments[2+t],a=3+t<0||arguments.length<=3+t?void 0:arguments[3+t],s=(0,u.G)(r,c,a);return e?s(n):s}(t,n,r);return Array.isArray(e)?g(e,c):g([e],e=>{let[t]=e;return c(t)})}function g(e,t){const n=(0,i.M)(()=>[]);return h(e,()=>{n.length=0;const r=e.length;for(let t=0;t<r;t++)n[t]=e[t].get();return t(n)})}var m=n(9927),x=n(3440),y=n(496),v=n(3928),b=n(579);const j=e=>{let{card:t,index:n,deckLength:r,isTop:a,onSelect:s,cycleTop:i,animatingRef:u}=e;const d=o(0),f=(0,l.I)(),h=p(d,[-300,300],f?[0,0]:[-18,18]),g=(0,m.s)(),j=(0,c.useRef)(!1),w=(0,c.useRef)(0);(0,c.useEffect)(()=>(j.current=!0,()=>{j.current=!1}),[]),(0,c.useEffect)(()=>{w.current=window.innerWidth+260},[]),(0,c.useEffect)(()=>{j.current&&g.start({scale:1-.028*(r-1-n),y:16*(r-1-n),opacity:1,transition:{duration:.55,ease:[.16,1,.3,1]}})},[g,r,n]);const k=t;return(0,b.jsx)(x.P.div,{className:"swipe-card glass-strong ".concat(a?"top":""),style:{backgroundImage:"url(".concat(k.image,"?w=900&auto=format&fit=crop&q=60)"),zIndex:10+n,x:d,rotate:h,boxShadow:a?"0 18px 40px -18px rgba(0,0,0,.65),0 4px 14px -6px rgba(0,0,0,.5)":void 0},initial:{scale:.94,y:40,opacity:0},drag:!!a&&"x",dragConstraints:{left:0,right:0},dragElastic:.22,onDragEnd:(e,t)=>{if(!a||u.current)return;const n=t.velocity.x,r=t.offset.x,c=r>0?1:-1;if(Math.abs(r)>120||Math.abs(n)>650){if(u.current=!0,j.current){let e=!1;g.start({x:c*w.current,y:-120,rotate:24*c,scale:1.04,transition:{duration:.42,ease:[.16,1,.3,1]}}).finally(()=>{!e&&j.current&&(i(),u.current=!1)}),setTimeout(()=>{!e&&j.current&&(e=!0,i(),u.current=!1)},260)}}else j.current&&g.start({x:0,y:0,rotate:0,scale:1,transition:{type:"spring",stiffness:420,damping:28}})},whileDrag:f?void 0:{scale:1.04,y:-4},onDoubleClick:()=>s(k),animate:g,variants:y.HI.propertyCard,transition:{layout:{duration:.45,ease:[.25,.1,.25,1]}},children:(0,b.jsxs)("div",{className:"swipe-card-overlay",children:[(0,b.jsxs)("div",{className:"swipe-meta",children:[(0,b.jsx)("span",{className:"badge",style:{marginBottom:".6rem"},children:k.type}),(0,b.jsx)("h3",{children:k.title}),(0,b.jsx)("p",{className:"loc",children:k.location}),(0,b.jsx)("p",{className:"price-line",children:(0,v.$)(k.price)}),(0,b.jsxs)("div",{className:"mini-meta",children:[k.beds," BD \u2022 ",k.baths," BA \u2022 ",k.size.toLocaleString()," SF"]})]}),(0,b.jsx)("div",{className:"swipe-actions",children:(0,b.jsx)("button",{className:"cta small",onClick:()=>s(k),children:"Details"})})]})})},w=e=>{let{items:t,onSelect:n}=e;const[a,s]=(0,c.useState)(t),i=(0,c.useRef)(!1);(0,c.useEffect)(()=>{s(t),i.current=!1},[t]);const o=(0,c.useCallback)(()=>{s(e=>{if(!e.length)return e;const t=[...e],n=t.pop();return n?(t.unshift((0,r.A)((0,r.A)({},n),{},{_cycle:(n._cycle||0)+1})),t):e})},[]);return(0,b.jsx)("div",{className:"swipe-deck",children:a.map((e,t)=>(0,b.jsx)(j,{card:e,index:t,deckLength:a.length,isTop:t===a.length-1,onSelect:n,cycleTop:o,animatingRef:i},"".concat(e.id,"-").concat(e._cycle||0)))})}}}]);
//# sourceMappingURL=swipe-deck.c91e2555.chunk.js.map